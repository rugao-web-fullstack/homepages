function showSubList(t){if($(".sort-hover").removeClass("sort-hover"),$(t).hasClass("sort-lottery"));else if($(t).addClass("sort-hover"),$(t).parents(".sort-cen").offset().top-$(".sort-con",$(t)).offset().top>1){var o=$(t).parents(".sort-cen").offset().top-$(t).offset().top;$(".sort-con",$(t)).css("top",o+"px")}hoverLazyloadImg($(t))}function hideSubList(t){$(t).removeClass("sort-hover"),m_dot=[]}$(function(){function t(){a=$(".sort-nav .sort-cen").offset().left,l=$(".sort-nav .sort-cen").offset().left+$(".sort-nav .sort-cen").width(),v=$(".sort-nav .sort-cen").offset().top,m=$(".sort-nav .sort-cen").offset().top+$(".sort-nav .sort-cen").height(),x={x:0,y:0},y={x:0,y:0},T={x:l,y:v},w={x:l,y:m},f=[];for(var t=0;t<$(".sort-nav .sort .sort-menu").length;t++)f.push($(".sort-nav .sort .sort-menu").eq(t).offset().top-2);f.push($(".sort-lottery .sort-menu").offset().top-2)}function o(){$(".sort-nav .sort-cen").hover(function(){},function(){$(".sort.sort-hover").removeClass("sort-hover"),u&&clearTimeout(u),clearTimeout(c),u=setTimeout(function(){h=[]},200)}),$(".sort-nav .sort-menu").hover(function(t){u&&clearTimeout(u);var o=$(this).parent(),e=$(".sort").index(o);e>-1&&e<C.length&&C[e]>0&&clearTimeout(C[e]);var s=300,f=t.clientX+$(window).scrollLeft(),a=t.clientY+$(window).scrollTop();if(h.length>0)if(x={x:h[0][0],y:h[0][1]},y={x:f,y:a},n(x,y,T,w))for(s=300,i=0;i<C.length;i++)C[i]>0&&clearTimeout(C[i]);else $(".sort-hover").removeClass("sort-hover"),s=0;else s=0;clearTimeout(c),c=setTimeout(function(){showSubList(o),r(f,a)},s),$(".sort-con",o).hover(function(){clearTimeout(c),r(f,a)},function(){hideSubList(o)})},function(){var t=$(this).parent(),o=$(".sort").index(t);if(o>-1)C[o]=e,$(".sort-con",t).hover(function(){clearTimeout(C[o]),C[o]=0},function(){hideSubList(t)});else var e=setTimeout(function(){hideSubList(t)},300)}),$(".sort-nav .sort-lottery").hover(function(){h=[],$(this).addClass("sort-lottery-hover"),$(this).removeClass("sort-hover")},function(){h=[],$(this).removeClass("sort-lottery-hover"),$(this).removeClass("sort-hover")})}function e(){$(".shop-content .sort-cen").hover(function(){},function(){$(".sort.sort-hover").removeClass("sort-hover"),u&&clearTimeout(u),clearTimeout(c),u=setTimeout(function(){h=[]},200)}),$(".shop-content .sort-menu").hover(function(t){u&&clearTimeout(u);var o=$(this).parent(),e=$(".sort").index(o);e>-1&&e<C.length&&C[e]>0&&clearTimeout(C[e]);var s=200,f=t.clientX+$(window).scrollLeft(),a=t.clientY+$(window).scrollTop();if(h.length>0)if(x={x:h[0][0],y:h[0][1]},y={x:f,y:a},n(x,y,T,w))for(s=200,i=0;i<C.length;i++)C[i]>0&&clearTimeout(C[i]);else $(".sort-hover").removeClass("sort-hover"),s=0;else s=0;clearTimeout(c),c=setTimeout(function(){showSubList(o),r(f,a)},s),$(".sort-con",o).hover(function(){clearTimeout(c),r(f,a)},function(){hideSubList(o)})},function(){var t=$(this).parent(),o=$(".sort").index(t);if(o>-1)C[o]=e,$(".sort-con",t).hover(function(){clearTimeout(C[o]),C[o]=0},function(){hideSubList(t)});else var e=setTimeout(function(){hideSubList(t)},200)})}function s(){for(a=$(".shop-content .sort-cen").offset().left,l=$(".shop-content .sort-cen").offset().left+$(".shop-content .sort-cen").width(),v=$(".shop-content .sort-cen").offset().top,m=$(".shop-content .sort-cen").offset().top+$(".shop-content .sort-cen").height(),x={x:0,y:0},y={x:0,y:0},T={x:l,y:v},w={x:l,y:m},f=[],i=0;i<$(".sort .sort-menu").length;i++)f.push($(".sort .sort-menu").eq(i).offset().top-2)}function n(t,o,e,s){return o.x>t.x&&o.x<l&&(t.y-o.y)/(o.x-t.x)>(t.y-s.y)/(s.x-t.x)&&(t.y-o.y)/(o.x-t.x)<(t.y-e.y)/(e.x-t.x)?!0:!1}function r(t,o){if(h=[],d=t,p=o,p>v&&m>p&&d>a&&l>d)for(var e=0;e<f.length-1;e++)if(p>=f[e]&&p<f[e+1]){$(".sort.sort-hover").removeClass("sort-hover"),$(".sort").eq(e).addClass("sort-hover");break}}if($(".sort-nav").length<=0)return!1;var c,h=[],f=[],u=null,a=0,l=0,v=0,m=0,d=0,p=0,x={},y={},T={},w={},C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=!0;$(".sort-nav").hover(function(){g=!0,$(".sort",$(this)).length<1?$.ajax({type:"GET",url:"/ajax/new_all_category.php",data:"cityid="+$(this).attr("cityid"),dataType:"json",success:function(e){e&&e.html&&($(".sort-nav .sort-cen").html(e.html),g&&$(".sort-nav").removeClass("sort-hide"),t(),o())}}):($(this).removeClass("sort-hide"),t()),$(".index_nav_out").length>=1&&(t(),o())},function(){$(this).hasClass("index_nav_out")||(g=!1,$(this).addClass("sort-hide"))}),$(".shop-content .sort-cen").length>0&&e(),$(".shop-content .sort-cen").hover(function(){s()}),$("body").bind("mousemove",function(t){var o=t.clientX+$(window).scrollLeft(),e=t.clientY+$(window).scrollTop();u&&clearTimeout(u),u=setTimeout(function(){r(o,e)},200),l>o?h.push([o,e]):r(o,e)})});